# 메모리 관리 전략

## 메모리 관리 배경

각각의 **프로세스**는 <u>독립된 메모리 공간</u>을 갖고, 운영체제 혹은 <u>다른 프로세스의 메모리 공간에 접근할 수 없는 제한</u>이 걸려있다. 단지, **운영체제**만이 운영체제 메모리 영역과 사용자 메모리 영역의 접근에 제약을 받지 않는다.



**Swapping** : <u>메모리의 관리를 위해 사용되는 기법</u>. 표준 Swapping방식으로는 round-robin과 같은 스케줄링의 다중 프로그래밍 환경에서 CPU 할당 시간이 끝난 프로세스의 메모리를 보조 기억장치(e.g. 하드디스크)로 내보내고 프로세스의 메모리를 불러 들일 수 있다.

> 이 과정을 swap이라 한다. 주 기억장치(RAM)으로 불러오는 과정을 swap-in, 보조 기억장치로 내보내는 과정을 swap-out이라 한다. swap에는 큰 디스크 전송시간이 필요하기 때문에 현재에는 메모리 공간이  부족할 때 Swapping이 시작된다.



**단편화 (Fragmentation)** : 프로세스들이 메모리에 적재되고 제거되는 일이 반복되다보면, 프로세들이 차지하는 메모리 틈 사이에 사용하지 못 할 만큼의 작은 자유공간들이 늘어나게 되는데, 이것이 **단편화**이다. 단편화는 2가지 종류로 나뉜다.

<p align="center">
    <img src="../assets/img/Fragmentation.PNG"/>
</p>

- 외부 단편화 : 메모리 공간 중 사용하지 못하게 되는 일부분. 물리 메모리(RAM)에서 사이사이 남는 공간들을 모두 합치면 충분한 공간이 되는 부분들이 **분산되어 있을때 발생한다고 볼 수 있다.**
- 내부 단편화 : 프로세스가 사용하는 메모리 공간에 포함된 남는 부분. 예를 들어 **메모리 분할 자유 공간이 10,00B 있고 Process A가 9,998B 사용되게 되면 2B 라는 차이**가 존재하고, 이 현상을 내부 단편화라 칭한다.



압축 : 외부 단편화를 해소하기 위해 프로세스가 사용하는 공간들을 한쪽으로 몰아, 자유공간을 확보하는 방법론이지만, 작업 효율이 좋지 않다. (위의 메모리 현황이 압축을 통해 아래의 그림처럼 바뀌는 효과를 가질 수 있다.)

<p align="center">
    <img src="../assets/img/Fragmentation_compress.PNG"/>
</p>

